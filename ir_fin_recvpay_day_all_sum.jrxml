<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="ir_fin_recvpay_day_all_sum" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="b0878858-80ae-4fd1-ba91-0897c22dcd3a">
	<property name="ireport.zoom" value="1.3310000000000008"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="as_coopid" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="as_coopcontrol" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="adtm_date" class="java.util.Date">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="pay_status" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="as_entryid" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="as_reportid" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="as_reportdetail" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="SUBREPORT_DIR" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["C:\\CLIENT(SPA)\\iReport\\"]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[SELECT
    FS.SLIP_NO,
    FS.ENTRY_ID,
    FS.ENTRY_DATE,
    FS.OPERATE_DATE,
    FS.FROM_SYSTEM,
    FS.PAYMENT_STATUS,
    FS.PAYMENT_DESC,
    FS.ITEM_AMT,
    FS.PAY_TOWHOM,
    FS.MEMBER_NO,
    FS.PAY_RECV_STATUS,
    FS.MEMBER_FLAG,
    FS.NONMEMBER_DETAIL,
    FS.COOP_ID,
    FS.MACHINE_ID,
    FS.CANCEL_ID,
    FS.CANCEL_DATE,
    FS.REF_SLIPNO,
    FS.RECEIPT_NO,
    FS.REMARK,
    FS.POSTTOVC_FLAG,
    FS.RECEIVE_DATE,
    FS.RECEIVE_STATUS,
    FS.TAX_AMT,
    FS.ITEMNET_AMT,
    FS.RECVPAY_ID,
    FS.ENTRY_DATE,
    FS.PAYSLIP_NO,
    FD.SLIPITEM_DESC,
    FD.ACCOUNT_ID,
    FD.ITEMNET_AMT,
    FT.ITEM_DESC,
    FD.ITEMTYPE_CODE,
    CM.COOP_NAME,
    FT.ACCOUNT_ID
FROM FINSLIP FS
JOIN FINSLIPDET FD ON FS.SLIP_NO = FD.SLIP_NO AND FS.COOP_ID = FD.COOP_ID
JOIN FINUCFITEMTYPE FT ON FD.ACCOUNT_ID = FT.SLIPITEMTYPE_CODE AND FT.COOP_ID = '090001'
JOIN ACCMASTER AC ON FD.ACCOUNT_ID = AC.ACCOUNT_ID
JOIN CMCOOPMASTER CM ON AC.COOP_ID = CM.COOP_ID AND FT.COOP_ID = CM.COOP_CONTROL
WHERE FS.SLIP_DATE = $P{adtm_date}
  AND FS.RECEIVE_STATUS = 1
  AND FS.PAYMENT_STATUS = 1
  AND FS.COOP_ID = $P{as_coopid}
  AND FS.FROM_SYSTEM = 'FIN'
  AND FS.PAY_RECV_STATUS LIKE $P{pay_status}
  AND CM.COOP_CONTROL = $P{as_coopcontrol}
order by FS.PAY_RECV_STATUS, FT.ACCOUNT_ID]]>
	</queryString>
	<field name="SLIP_NO" class="java.lang.String"/>
	<field name="ENTRY_ID" class="java.lang.String"/>
	<field name="ENTRY_DATE" class="java.sql.Timestamp"/>
	<field name="OPERATE_DATE" class="java.sql.Timestamp"/>
	<field name="FROM_SYSTEM" class="java.lang.String"/>
	<field name="PAYMENT_STATUS" class="java.math.BigDecimal"/>
	<field name="PAYMENT_DESC" class="java.lang.String"/>
	<field name="ITEM_AMT" class="java.math.BigDecimal"/>
	<field name="PAY_TOWHOM" class="java.lang.String"/>
	<field name="MEMBER_NO" class="java.lang.String"/>
	<field name="PAY_RECV_STATUS" class="java.math.BigDecimal"/>
	<field name="MEMBER_FLAG" class="java.math.BigDecimal"/>
	<field name="NONMEMBER_DETAIL" class="java.lang.String"/>
	<field name="COOP_ID" class="java.lang.String"/>
	<field name="MACHINE_ID" class="java.lang.String"/>
	<field name="CANCEL_ID" class="java.lang.String"/>
	<field name="CANCEL_DATE" class="java.sql.Timestamp"/>
	<field name="REF_SLIPNO" class="java.lang.String"/>
	<field name="RECEIPT_NO" class="java.lang.String"/>
	<field name="REMARK" class="java.lang.String"/>
	<field name="POSTTOVC_FLAG" class="java.math.BigDecimal"/>
	<field name="RECEIVE_DATE" class="java.sql.Timestamp"/>
	<field name="RECEIVE_STATUS" class="java.math.BigDecimal"/>
	<field name="TAX_AMT" class="java.math.BigDecimal"/>
	<field name="ITEMNET_AMT" class="java.math.BigDecimal"/>
	<field name="RECVPAY_ID" class="java.lang.String"/>
	<field name="PAYSLIP_NO" class="java.lang.String"/>
	<field name="SLIPITEM_DESC" class="java.lang.String"/>
	<field name="ACCOUNT_ID" class="java.lang.String"/>
	<field name="ITEM_DESC" class="java.lang.String"/>
	<field name="ITEMTYPE_CODE" class="java.lang.String"/>
	<field name="COOP_NAME" class="java.lang.String"/>
	<variable name="sum_accid" class="java.math.BigDecimal" resetType="Group" resetGroup="account_id" calculation="Sum">
		<variableExpression><![CDATA[$F{ITEM_AMT}]]></variableExpression>
	</variable>
	<variable name="sum_pay_recv_status" class="java.math.BigDecimal" resetType="Group" resetGroup="pay_recv_status" calculation="Sum">
		<variableExpression><![CDATA[$F{ITEM_AMT}]]></variableExpression>
	</variable>
	<group name="head"/>
	<group name="pay_recv_status" isReprintHeaderOnEachPage="true">
		<groupExpression><![CDATA[$F{PAY_RECV_STATUS}]]></groupExpression>
		<groupHeader>
			<band height="40">
				<textField>
					<reportElement uuid="15ecdbd7-747d-4e52-a926-97af623b9577" x="0" y="20" width="555" height="20"/>
					<textElement>
						<font fontName="Angsana New" size="14" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{PAY_RECV_STATUS}==0?"รายการจ่าย":"รายการรับ"]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement uuid="3a623df7-f36f-4d8b-bbf4-c3ee3bedcd49" x="0" y="0" width="36" height="20"/>
					<box>
						<topPen lineWidth="0.5"/>
						<bottomPen lineWidth="0.5"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font fontName="Angsana New" size="14" isBold="true"/>
					</textElement>
					<text><![CDATA[ลำดับ]]></text>
				</staticText>
				<staticText>
					<reportElement uuid="5944429b-91de-4179-8251-c17e7839da4c" x="36" y="0" width="76" height="20"/>
					<box>
						<topPen lineWidth="0.5"/>
						<bottomPen lineWidth="0.5"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font fontName="Angsana New" size="14" isBold="true"/>
					</textElement>
					<text><![CDATA[เลขสมาชิก]]></text>
				</staticText>
				<staticText>
					<reportElement uuid="0f96ff12-253f-49ad-8e55-b916c5e3e40c" x="112" y="0" width="182" height="20"/>
					<box>
						<topPen lineWidth="0.5"/>
						<bottomPen lineWidth="0.5"/>
					</box>
					<textElement verticalAlignment="Middle">
						<font fontName="Angsana New" size="14" isBold="true"/>
					</textElement>
					<text><![CDATA[ผู้ชำระ]]></text>
				</staticText>
				<staticText>
					<reportElement uuid="c6cc8d83-eff8-4e63-8240-f0545280e182" x="294" y="0" width="80" height="20"/>
					<box>
						<topPen lineWidth="0.5"/>
						<bottomPen lineWidth="0.5"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font fontName="Angsana New" size="14" isBold="true"/>
					</textElement>
					<text><![CDATA[จำนวนเงิน]]></text>
				</staticText>
				<staticText>
					<reportElement uuid="56a92b18-7de8-466a-83c8-ebaa0784d7e8" x="374" y="0" width="56" height="20"/>
					<box>
						<topPen lineWidth="0.5"/>
						<bottomPen lineWidth="0.5"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font fontName="Angsana New" size="14" isBold="true"/>
					</textElement>
					<text><![CDATA[การชำระ]]></text>
				</staticText>
				<staticText>
					<reportElement uuid="ad27da71-d76b-495a-9ccd-6d1e95663a7e" x="430" y="0" width="75" height="20"/>
					<box>
						<topPen lineWidth="0.5"/>
						<bottomPen lineWidth="0.5"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font fontName="Angsana New" size="14" isBold="true"/>
					</textElement>
					<text><![CDATA[ใบเสร็จ/ใบสำคัญจ่าย]]></text>
				</staticText>
				<staticText>
					<reportElement uuid="b8fbae6c-4a58-4152-a507-203727562c29" x="505" y="0" width="50" height="20"/>
					<box>
						<topPen lineWidth="0.5"/>
						<bottomPen lineWidth="0.5"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font fontName="Angsana New" size="14" isBold="true"/>
					</textElement>
					<text><![CDATA[ผู้ทำรายการ]]></text>
				</staticText>
			</band>
		</groupHeader>
		<groupFooter>
			<band height="20">
				<textField>
					<reportElement uuid="6123d713-e84f-4074-a5c3-5f1fd07fcdb1" x="0" y="0" width="191" height="20"/>
					<box>
						<bottomPen lineWidth="0.5" lineStyle="Double"/>
					</box>
					<textElement>
						<font fontName="Angsana New" size="14" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA["รวมตาม"+($F{PAY_RECV_STATUS}==0?"รายการจ่าย":"รายการรับ")]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement uuid="1482188a-1fa2-400e-a783-6d429cd320b5" x="191" y="0" width="39" height="20"/>
					<box>
						<bottomPen lineWidth="0.5" lineStyle="Double"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font fontName="Angsana New" size="14" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[$V{pay_recv_status_COUNT}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement uuid="e7989c0b-acaf-4879-9ae2-62fb158e7baa" x="230" y="0" width="64" height="20"/>
					<box>
						<bottomPen lineWidth="0.5" lineStyle="Double"/>
					</box>
					<textElement verticalAlignment="Middle">
						<font fontName="Angsana New" size="14" isBold="true"/>
					</textElement>
					<text><![CDATA[รายการ]]></text>
				</staticText>
				<staticText>
					<reportElement uuid="f9db44a8-78fc-4c21-a9f5-ba88e76ad847" x="374" y="0" width="180" height="20"/>
					<box>
						<bottomPen lineWidth="0.5" lineStyle="Double"/>
					</box>
					<textElement verticalAlignment="Middle">
						<font fontName="Angsana New" size="14" isBold="true"/>
					</textElement>
					<text><![CDATA[บาท]]></text>
				</staticText>
				<textField pattern="#,##0.00">
					<reportElement uuid="3757c766-1b33-4b07-98e0-7715ed479ccd" x="294" y="0" width="80" height="20"/>
					<box>
						<bottomPen lineWidth="0.5" lineStyle="Double"/>
					</box>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font fontName="Angsana New" size="14" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[$V{sum_pay_recv_status}]]></textFieldExpression>
				</textField>
			</band>
		</groupFooter>
	</group>
	<group name="account_id">
		<groupExpression><![CDATA[$F{ACCOUNT_ID}]]></groupExpression>
		<groupHeader>
			<band height="40">
				<textField>
					<reportElement uuid="d8702bd7-c3c5-4119-9f6d-066ef54b400e" x="0" y="0" width="555" height="20"/>
					<textElement verticalAlignment="Middle">
						<font fontName="Angsana New" size="14" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{ACCOUNT_ID}+ " - " + $F{ITEM_DESC}]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement uuid="72545bf1-4b21-4506-8ae1-604616465c55" x="0" y="20" width="555" height="20"/>
					<box leftPadding="5"/>
					<textElement verticalAlignment="Middle">
						<font fontName="Angsana New" size="14" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA["("+($F{PAY_RECV_STATUS}==0?"จ่าย":"รับ")+")" + $F{ACCOUNT_ID}+ " - " + $F{ITEM_DESC}]]></textFieldExpression>
				</textField>
			</band>
		</groupHeader>
		<groupFooter>
			<band height="20">
				<textField>
					<reportElement uuid="fbfd2ccd-3c47-4b21-8f7e-6eef8dd89fde" x="191" y="0" width="39" height="20"/>
					<box>
						<topPen lineWidth="0.5"/>
						<bottomPen lineWidth="0.5"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font fontName="Angsana New" size="14" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[$V{account_id_COUNT}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement uuid="d9e519c5-dd68-4410-96dc-160c54de8763" x="230" y="0" width="64" height="20"/>
					<box>
						<topPen lineWidth="0.5"/>
						<bottomPen lineWidth="0.5"/>
					</box>
					<textElement verticalAlignment="Middle">
						<font fontName="Angsana New" size="14" isBold="true"/>
					</textElement>
					<text><![CDATA[รายการ]]></text>
				</staticText>
				<textField pattern="#,##0.00">
					<reportElement uuid="2e69d7a7-ab55-4559-9683-28a799679118" x="294" y="0" width="80" height="20"/>
					<box>
						<topPen lineWidth="0.5"/>
						<bottomPen lineWidth="0.5"/>
					</box>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font fontName="Angsana New" size="14" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[$V{sum_accid}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement uuid="8f7c9818-627d-4e72-ac14-80f7f240ebd5" x="374" y="0" width="180" height="20"/>
					<box>
						<topPen lineWidth="0.5"/>
						<bottomPen lineWidth="0.5"/>
					</box>
					<textElement verticalAlignment="Middle">
						<font fontName="Angsana New" size="14" isBold="true"/>
					</textElement>
					<text><![CDATA[บาท]]></text>
				</staticText>
				<textField>
					<reportElement uuid="c92e673b-c5c9-433b-8022-06e6b414f4bd" x="0" y="0" width="191" height="20"/>
					<box>
						<topPen lineWidth="0.5"/>
						<bottomPen lineWidth="0.5"/>
					</box>
					<textElement verticalAlignment="Middle">
						<font fontName="Angsana New" size="14" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA["รวมตามประเภทรายการ "+$F{ITEM_DESC}]]></textFieldExpression>
				</textField>
			</band>
		</groupFooter>
	</group>
	<background>
		<band splitType="Stretch"/>
	</background>
	<pageHeader>
		<band height="20">
			<subreport>
				<reportElement uuid="86a863ae-2fac-402d-a579-3837d4cf941c" x="0" y="0" width="554" height="20"/>
				<subreportParameter name="as_coopid">
					<subreportParameterExpression><![CDATA[$P{as_coopid}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="as_reportid">
					<subreportParameterExpression><![CDATA[$P{as_reportid}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="as_entryid">
					<subreportParameterExpression><![CDATA[$P{as_entryid}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="as_reportdetail">
					<subreportParameterExpression><![CDATA["วันที่ "+new SimpleDateFormat("dd/MM/yyyy",new Locale("th","TH")).format($P{adtm_date})]]></subreportParameterExpression>
				</subreportParameter>
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<subreportExpression><![CDATA["report_header\\ir_header_portrait.jasper"]]></subreportExpression>
			</subreport>
		</band>
	</pageHeader>
	<detail>
		<band height="20" splitType="Stretch">
			<textField isBlankWhenNull="true">
				<reportElement uuid="0179d282-faa1-4277-b50e-eede49b1ea1a" x="36" y="0" width="76" height="20"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Angsana New" size="14"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{MEMBER_NO}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement uuid="e564e12a-3e45-4705-acea-a22139f900a0" x="0" y="0" width="36" height="20"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Angsana New" size="14"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{account_id_COUNT}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement uuid="6f881e70-e28a-41bb-aa54-f6d96bea3bbd" x="112" y="0" width="182" height="20"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Angsana New" size="14"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{NONMEMBER_DETAIL}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00">
				<reportElement uuid="3ebb4dce-f47f-4e26-b826-71806aac9342" x="294" y="0" width="80" height="20"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Angsana New" size="14"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{ITEM_AMT}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement uuid="e2415246-dea1-46d5-bc9d-deec358f005d" x="430" y="0" width="75" height="20"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Angsana New" size="14"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{PAY_RECV_STATUS}==0?$F{SLIP_NO}:($F{RECEIPT_NO}==null?"":$F{RECEIPT_NO})]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement uuid="4ad9a4ae-ec4e-4310-97f8-d2c4e621a022" x="505" y="0" width="50" height="20"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Angsana New" size="14"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{ENTRY_ID}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<pageFooter>
		<band height="20">
			<textField evaluationTime="Report" pattern="" isBlankWhenNull="true">
				<reportElement uuid="2a029ab6-e356-4c90-8f6c-345af60f3093" x="535" y="0" width="20" height="20"/>
				<box>
					<bottomPen lineWidth="0.0"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Angsana New" size="12" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[" / " +$V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
			<textField evaluationTime="Page" pattern="" isBlankWhenNull="true">
				<reportElement uuid="589d64b6-d44f-48e3-aa3a-eaee204aa3f9" x="0" y="0" width="535" height="20"/>
				<box>
					<bottomPen lineWidth="0.0"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Angsana New" size="12" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
		</band>
	</pageFooter>
</jasperReport>
