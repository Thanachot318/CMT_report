<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="ir_mbshr_mbreqgain_gain_new" language="groovy" pageWidth="373" pageHeight="802" columnWidth="373" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" uuid="b177f054-5761-4051-a6c3-30ba17e4358c">
	<property name="ireport.zoom" value="1.610510000000001"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="gain_docno" class="java.lang.String"/>
	<queryString>
		<![CDATA[select
	gd.seq_no,
	(case when gd.prename_code != '000'
		and gd.prename_code is not null
		then pg.prename_desc || gd.gain_name || ' ' || gd.gain_surname
		else gd.gain_name || ' ' || gd.gain_surname
	 end
	) as gainname_new,
	gd.card_person,
	gr.gain_concern,
	gd.gain_percent
from mbreqgain gm
left join mbreqgaindetail gd on gm.gain_docno = gd.gain_docno
left join mbucfprename pg on gd.prename_code = pg.prename_code
left join mbucfgainconcern gr on gd.relation_code = gr.concern_code
where gd.gain_chgtype = 'NEW'
	and gd.gain_docno = 	$P{gain_docno}
order by gd.seq_no]]>
	</queryString>
	<field name="SEQ_NO" class="java.math.BigDecimal"/>
	<field name="GAINNAME_NEW" class="java.lang.String"/>
	<field name="CARD_PERSON" class="java.lang.String"/>
	<field name="GAIN_CONCERN" class="java.lang.String"/>
	<field name="GAIN_PERCENT" class="java.math.BigDecimal"/>
	<background>
		<band splitType="Stretch"/>
	</background>
	<detail>
		<band height="20" splitType="Stretch">
			<textField isBlankWhenNull="true">
				<reportElement uuid="1da566a9-e5da-48e7-ac8b-94bbb6ab7e52" x="174" y="0" width="71" height="20"/>
				<textElement textAlignment="Center">
					<font fontName="Angsana New" size="14"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{GAIN_CONCERN}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement uuid="26729ce2-5e22-474c-becc-3ffb85cdf12e" x="24" y="0" width="151" height="20"/>
				<textElement>
					<font fontName="Angsana New" size="14"/>
				</textElement>
				<textFieldExpression><![CDATA[" " + $F{GAINNAME_NEW}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement uuid="6ebb613e-1afc-423b-91ca-82e8f2cbf981" x="326" y="0" width="47" height="20"/>
				<textElement textAlignment="Center">
					<font fontName="Angsana New" size="14"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{GAIN_PERCENT} + "%"]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement uuid="a8acbaa3-669b-4ec9-9a41-955c7cef7983" x="244" y="0" width="83" height="20"/>
				<textElement textAlignment="Center">
					<font fontName="Angsana New" size="14"/>
				</textElement>
				<textFieldExpression><![CDATA[($F{CARD_PERSON}.substring(0, 1) + "-" +
$F{CARD_PERSON}.substring(1, 5) + "-" +
$F{CARD_PERSON}.substring(5, 10) + "-" +
$F{CARD_PERSON}.substring(10, 12) + "-") +
$F{CARD_PERSON}.substring(12, 13)]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement uuid="3f7d6e07-2e0e-48fc-9596-0a2bfa18753e" x="1" y="0" width="24" height="20"/>
				<textElement>
					<font fontName="Angsana New" size="14"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{SEQ_NO} + ")"]]></textFieldExpression>
			</textField>
		</band>
	</detail>
</jasperReport>
