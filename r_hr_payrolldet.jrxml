<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="r_hr_payrolldet" language="groovy" pageWidth="864" pageHeight="595" orientation="Landscape" columnWidth="824" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="32808aca-064b-4e46-beef-57a01ea7af79">
	<property name="ireport.zoom" value="0.9090909090909095"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="year" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="start_month" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="end_month" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[select
(select emptype_desc from hrucfemptype where emptype_code ='01') as emptype_desc,
hr.emp_no,
mup.prename_desc || hr.emp_name || '  ' || hr.emp_surname as fullname,
hr.salary_amt,
 $P{year} as year,
case ($P{start_month})
                            when '01' then 'มกราคม'
                            when '02' then 'กุมภาพันธ์'
                            when '03' then 'มีนาคม'
                            when '04' then 'เมษายน'
		       			 when '05' then 'พฤษภาคม'
                            when '06' then 'มิถุนายน'
                            when '07' then 'กรกฎาคม'
                            when '08' then 'สิงหาคม'
                            when '09' then 'กันยายน'
                            when '10' then 'ตุลาคม'
                            when '11' then 'พฤศจิกายน'
                            when '12' then 'ธันวาคม'
                            else ''
                            end as start_month,
case ($P{end_month})
                            when '01' then 'มกราคม'
                            when '02' then 'กุมภาพันธ์'
                            when '03' then 'มีนาคม'
                            when '04' then 'เมษายน'
		       			 when '05' then 'พฤษภาคม'
                            when '06' then 'มิถุนายน'
                            when '07' then 'กรกฎาคม'
                            when '08' then 'สิงหาคม'
                            when '09' then 'กันยายน'
                            when '10' then 'ตุลาคม'
                            when '11' then 'พฤศจิกายน'
                            when '12' then 'ธันวาคม'
                            else ''
                            end as end_month,
nvl((select sum(hd.item_amt) as item_amt from hrpayrolldet hd where hd.salitem_code = 'P01' and hd.payrollslip_no = h.payrollslip_no),0) as money_sof,
nvl((select sum(hd.item_amt) as item_amt from hrpayrolldet hd where hd.salitem_code = 'P02' and hd.payrollslip_no = h.payrollslip_no),0) as money_pof,
nvl((select sum(hd.item_amt) as item_amt from hrpayrolldet hd where hd.salitem_code = 'P05' and hd.payrollslip_no = h.payrollslip_no),0) as money_kp,
nvl((select sum(hd.item_amt) as item_amt from hrpayrolldet hd where hd.salitem_code = 'P04' and hd.payrollslip_no = h.payrollslip_no),0) as money_etc,
nvl((select sum(hd.item_amt) as item_amt from hrpayrolldet hd where hd.salitem_code in ('P04','P05','P02','P01') and hd.payrollslip_no = h.payrollslip_no),0) as money_sum,
(nvl(hr.salary_amt,0)+ nvl(hr.compensation_amt1,0) + nvl(compensation_amt2,0)+ nvl(hr.professional_amt,0)) -
nvl((select sum(hd.item_amt) from hrpayrolldet hd where hd.salitem_code in ('P04','P05','P02','P01') and hd.payrollslip_no = h.payrollslip_no),0) as total,
hr.professional_amt,
(hr.compensation_amt1 + compensation_amt2) as compensation_amt
from hremployee hr , mbucfprename mup , hrpayroll h
where hr.prename_code = mup.prename_code(+)
and hr.emp_no = h.emp_no(+)
and h.payroll_period between $P{year}||$P{start_month} and $P{year}||$P{end_month}
and hr.emptype_code ='01'
order by h.payroll_period,hr.emp_no]]>
	</queryString>
	<field name="EMPTYPE_DESC" class="java.lang.String"/>
	<field name="EMP_NO" class="java.lang.String"/>
	<field name="FULLNAME" class="java.lang.String"/>
	<field name="SALARY_AMT" class="java.math.BigDecimal"/>
	<field name="YEAR" class="java.lang.String"/>
	<field name="START_MONTH" class="java.lang.String"/>
	<field name="END_MONTH" class="java.lang.String"/>
	<field name="MONEY_SOF" class="java.math.BigDecimal"/>
	<field name="MONEY_POF" class="java.math.BigDecimal"/>
	<field name="MONEY_KP" class="java.math.BigDecimal"/>
	<field name="MONEY_ETC" class="java.math.BigDecimal"/>
	<field name="MONEY_SUM" class="java.math.BigDecimal"/>
	<field name="TOTAL" class="java.math.BigDecimal"/>
	<field name="PROFESSIONAL_AMT" class="java.math.BigDecimal"/>
	<field name="COMPENSATION_AMT" class="java.math.BigDecimal"/>
	<background>
		<band splitType="Stretch"/>
	</background>
	<pageHeader>
		<band height="70" splitType="Stretch">
			<staticText>
				<reportElement uuid="70ff3456-465e-4c08-881b-fa3aeca1c3aa" x="0" y="1" width="824" height="20"/>
				<textElement textAlignment="Center">
					<font fontName="Angsana New" size="16" isBold="true"/>
				</textElement>
				<text><![CDATA[รายงานหักแยกตามประเภท (แยกรายละเอียด)]]></text>
			</staticText>
			<textField>
				<reportElement uuid="9cc6729d-29c0-438c-a335-98e0230221b8" x="0" y="41" width="824" height="26"/>
				<box>
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement textAlignment="Center">
					<font fontName="Angsana New" size="14"/>
				</textElement>
				<textFieldExpression><![CDATA["ระหว่างเดือน " +' '+$F{START_MONTH}+' '+$F{YEAR}+" ถึง " +' '+$F{END_MONTH}+' '+$F{YEAR}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement uuid="693b752b-4b3f-4eec-a342-62dbdd1ba50f" x="0" y="21" width="824" height="20"/>
				<box>
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement textAlignment="Center">
					<font fontName="Angsana New" size="14"/>
				</textElement>
				<textFieldExpression><![CDATA["ประเภทลูกจ้าง " +$F{EMPTYPE_DESC}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement uuid="24d5f66e-c744-49ed-9b1f-ff71985d39bc" x="745" y="2" width="77" height="20"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Angsana New" size="10"/>
				</textElement>
				<textFieldExpression><![CDATA["วันที่พิมพ์ : " + new SimpleDateFormat("dd/MM/yyyy",new Locale ( "th", "TH" )).format(new java.util.Date())]]></textFieldExpression>
			</textField>
		</band>
	</pageHeader>
	<columnHeader>
		<band height="20">
			<staticText>
				<reportElement uuid="713671a0-ef1e-4a2b-9ebf-2e65366e4505" x="0" y="0" width="40" height="20"/>
				<box>
					<pen lineWidth="0.5"/>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Angsana New" size="14"/>
				</textElement>
				<text><![CDATA[ลำดับที่
]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="d854d1cd-d2d6-4884-b82f-1919f8f6cbf4" x="40" y="0" width="180" height="20"/>
				<box>
					<pen lineWidth="0.5"/>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Angsana New" size="14"/>
				</textElement>
				<text><![CDATA[ชื่อ-นามสกุล]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="406841e9-1ebd-4b8b-b196-2b1995dc27f0" x="483" y="0" width="80" height="20"/>
				<box>
					<pen lineWidth="0.5"/>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Angsana New" size="14"/>
				</textElement>
				<text><![CDATA[ภาษี ณ ที่จ่าย]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="8657bbc6-ab31-4cca-9c51-e0f6b3cb3606" x="563" y="0" width="80" height="20"/>
				<box>
					<pen lineWidth="0.5"/>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Angsana New" size="14"/>
				</textElement>
				<text><![CDATA[ประกันสังคม
]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="cc5179d9-fe6e-41f5-b471-8cb251a1250f" x="643" y="0" width="80" height="20"/>
				<box>
					<pen lineWidth="0.5"/>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Angsana New" size="14"/>
				</textElement>
				<text><![CDATA[หักสหกรณ์]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="59bcc9f1-5842-4c20-96fb-cfa4e84d6efd" x="220" y="0" width="85" height="20"/>
				<box>
					<pen lineWidth="0.5"/>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Angsana New" size="14"/>
				</textElement>
				<text><![CDATA[เงินเดือน]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="46a7cfab-6acd-4a36-98d7-d2146fae27be" x="723" y="0" width="101" height="20"/>
				<box>
					<pen lineWidth="0.5"/>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Angsana New" size="14"/>
				</textElement>
				<text><![CDATA[คงเหลือ]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="484a6213-cb5f-4772-ae92-69ce691a461d" x="403" y="0" width="80" height="20"/>
				<box>
					<pen lineWidth="0.5"/>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Angsana New" size="14"/>
				</textElement>
				<text><![CDATA[ค่าวิชาชีพ]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="c6e25cc4-04be-4035-b160-c2cf6cdf1f7d" x="305" y="0" width="98" height="20"/>
				<box>
					<pen lineWidth="0.5"/>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Angsana New" size="14"/>
				</textElement>
				<text><![CDATA[ค่าตอบเเทนพิเศษ]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="20" splitType="Stretch">
			<textField isBlankWhenNull="true">
				<reportElement uuid="d3f303ad-6d3c-45e2-97dc-bd3300f27bba" x="0" y="0" width="40" height="20" isPrintWhenDetailOverflows="true"/>
				<box>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Angsana New" size="14"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{REPORT_COUNT}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement uuid="82a35c1c-2588-428e-b895-a41237e435c7" x="40" y="0" width="180" height="20" isPrintWhenDetailOverflows="true"/>
				<box leftPadding="5">
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Angsana New" size="14"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{FULLNAME}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement uuid="8b72b7b3-3e8a-437d-8cdf-52ea5e23caf7" x="220" y="0" width="85" height="20" isPrintWhenDetailOverflows="true"/>
				<box leftPadding="0" rightPadding="4">
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Angsana New" size="14"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{SALARY_AMT}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement uuid="89f0ac64-38ca-42ee-b1fa-1adc0ee8ce08" x="483" y="0" width="80" height="20" isPrintWhenDetailOverflows="true"/>
				<box leftPadding="0" rightPadding="4">
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Angsana New" size="14"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{MONEY_SOF}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement uuid="9e6b9299-58ab-48ed-800a-a080cd25e9f9" x="563" y="0" width="80" height="20" isPrintWhenDetailOverflows="true"/>
				<box leftPadding="0" rightPadding="4">
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Angsana New" size="14"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{MONEY_POF}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement uuid="4ba1e157-abe5-4716-9582-0be935d5a631" x="643" y="0" width="80" height="20" isPrintWhenDetailOverflows="true"/>
				<box leftPadding="0" rightPadding="4">
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Angsana New" size="14"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{MONEY_KP}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement uuid="885b7cef-10c2-4ff3-bd09-8b5623ea207d" x="723" y="0" width="101" height="20" isPrintWhenDetailOverflows="true"/>
				<box leftPadding="0" rightPadding="4">
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Angsana New" size="14"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{TOTAL}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement uuid="3a3ce271-8ca3-4825-ad3b-d214b7996488" x="403" y="0" width="80" height="20" isPrintWhenDetailOverflows="true"/>
				<box leftPadding="0" rightPadding="4">
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Angsana New" size="14"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{PROFESSIONAL_AMT}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement uuid="7901d12d-6e0c-4319-9eaf-2c3ea186bc1e" x="305" y="0" width="98" height="20" isPrintWhenDetailOverflows="true"/>
				<box leftPadding="0" rightPadding="4">
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Angsana New" size="14"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{COMPENSATION_AMT}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<summary>
		<band height="20" splitType="Stretch"/>
	</summary>
</jasperReport>
