<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="r_hr_tax_system" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="add294b7-602f-4467-bbf7-885b424db890">
	<property name="ireport.zoom" value="2.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="as_coopid" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[select
hs.emp_no,
mup.prename_desc || hr.emp_name || ' ' || hr.emp_surname as fullname,
(case when hr.emp_status = '1' then hr.salary_amt + hup.pos_money else hr.salary_amt end)
as all_money,
hs.tax_amt as tax_amt,
CEIL(hs.tax_amt / 12) as tax_amt_month,
hs.oprate_date
from hrtaxsystem hs , hremployee hr , mbucfprename mup , hrucfposition hup
where hs.emp_no = hr.emp_no(+) and
hr.prename_code = mup.prename_code(+) and
hr.pos_code = hup.pos_code(+) and
hs.coop_id = $P{as_coopid} and hs.tax_amt > 0 order by hs.emp_no]]>
	</queryString>
	<field name="EMP_NO" class="java.lang.String"/>
	<field name="FULLNAME" class="java.lang.String"/>
	<field name="ALL_MONEY" class="java.math.BigDecimal"/>
	<field name="TAX_AMT" class="java.math.BigDecimal"/>
	<field name="TAX_AMT_MONTH" class="java.math.BigDecimal"/>
	<field name="OPRATE_DATE" class="java.sql.Timestamp"/>
	<variable name="sum_tax" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{TAX_AMT}]]></variableExpression>
	</variable>
	<variable name="sum_taxmonth" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{TAX_AMT_MONTH}]]></variableExpression>
	</variable>
	<variable name="sum_all" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{ALL_MONEY}]]></variableExpression>
	</variable>
	<background>
		<band splitType="Stretch"/>
	</background>
	<pageHeader>
		<band height="105" splitType="Stretch">
			<textField>
				<reportElement uuid="7719bf50-e3fc-4be5-8c1c-cf7c580664aa" x="0" y="15" width="555" height="20"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Angsana New" size="17" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA["สหกรณ์ออมทรัพย์ มหาวิทยาลัยศรีนครินทรวิโรฒ จำกัด"]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement uuid="24f640fa-fec7-4249-a4d1-cea81f70637a" x="0" y="35" width="555" height="24"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Angsana New" size="16" isBold="true"/>
				</textElement>
				<text><![CDATA[รายงานภาษีจากระบบ]]></text>
			</staticText>
			<textField>
				<reportElement uuid="74dad495-79cf-441e-89ad-5a8ed078c9ed" x="426" y="7" width="129" height="25"/>
				<textElement textAlignment="Right">
					<font fontName="Angsana New" size="10" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA["วันที่พิมพ์ : " + new SimpleDateFormat("dd/MM/yyyy",new Locale ( "th", "TH" )).format(new java.util.Date()) + "  " + new SimpleDateFormat("HH:mm:ss",new Locale("th","TH")).format(new java.util.Date())]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement uuid="41ff052a-7a76-41cf-91d8-8bf3bf6379ea" x="0" y="83" width="42" height="22"/>
				<box>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Angsana New" size="16" isBold="true"/>
				</textElement>
				<text><![CDATA[ลำดับ]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="ed2f8957-5e8b-4dd9-bbeb-7ad83f6cf891" x="42" y="83" width="74" height="22"/>
				<box>
					<topPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Angsana New" size="16" isBold="true"/>
				</textElement>
				<text><![CDATA[เลขพนักงาน]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="efea3cc0-b7e1-4719-842b-0346ee9ecff3" x="116" y="83" width="178" height="22"/>
				<box>
					<topPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Angsana New" size="16" isBold="true"/>
				</textElement>
				<text><![CDATA[ชื่อ-สกุล]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="60120ebd-e0a4-4604-90e8-2b9d9e3c9815" x="381" y="83" width="87" height="22"/>
				<box>
					<topPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Angsana New" size="16" isBold="true"/>
				</textElement>
				<text><![CDATA[ภาษีทั้งปี]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="cc5c1407-878e-4832-9ddc-6fa060665804" x="468" y="83" width="87" height="22"/>
				<box>
					<topPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Angsana New" size="16" isBold="true"/>
				</textElement>
				<text><![CDATA[ภาษี/เดือน]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="82308b37-f800-48c8-9f39-673872fdce14" x="294" y="83" width="87" height="22"/>
				<box>
					<topPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Angsana New" size="16" isBold="true"/>
				</textElement>
				<text><![CDATA[เงินได้/เดือน]]></text>
			</staticText>
		</band>
	</pageHeader>
	<detail>
		<band height="20" splitType="Stretch">
			<textField>
				<reportElement uuid="3180220d-6abe-4d1b-a735-719999cde56d" x="0" y="0" width="42" height="20"/>
				<box>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center">
					<font fontName="Angsana New" size="16"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{REPORT_COUNT}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement uuid="8d73620b-3e36-4586-b3d4-24179fef103f" x="42" y="0" width="74" height="20"/>
				<box>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center">
					<font fontName="Angsana New" size="16"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{EMP_NO}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement uuid="15779f52-4114-438e-b775-5fb8eb1815a5" x="116" y="0" width="178" height="20"/>
				<box leftPadding="4">
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement>
					<font fontName="Angsana New" size="16"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{FULLNAME}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00">
				<reportElement uuid="910b10c5-a0ea-407b-924c-7aba6de8302f" x="381" y="0" width="87" height="20"/>
				<box rightPadding="3">
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Right">
					<font fontName="Angsana New" size="16"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{TAX_AMT}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00">
				<reportElement uuid="ebbe1246-76fe-4a99-9f9f-9b4c58f8769a" x="468" y="0" width="87" height="20"/>
				<box rightPadding="3">
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Right">
					<font fontName="Angsana New" size="16"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{TAX_AMT_MONTH}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00">
				<reportElement uuid="83b8d649-0a98-4863-a23f-088baf44f12b" x="294" y="0" width="87" height="20"/>
				<box rightPadding="3">
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Right">
					<font fontName="Angsana New" size="16"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{ALL_MONEY}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<summary>
		<band height="22" splitType="Stretch">
			<staticText>
				<reportElement uuid="13eee6c7-9564-464e-b173-00c262e71077" x="0" y="0" width="294" height="22"/>
				<box>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Angsana New" size="16" isBold="true"/>
				</textElement>
				<text><![CDATA[รวม]]></text>
			</staticText>
			<textField pattern="#,##0.00">
				<reportElement uuid="fb8a1630-233e-4b10-85be-924b63262132" x="381" y="0" width="87" height="22"/>
				<box rightPadding="3">
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Right">
					<font fontName="Angsana New" size="16"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{sum_tax}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00">
				<reportElement uuid="fab7c6dd-1e2d-45de-b0d7-44f39fb56d72" x="468" y="0" width="87" height="22"/>
				<box rightPadding="3">
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Right">
					<font fontName="Angsana New" size="16"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{sum_taxmonth}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00">
				<reportElement uuid="c84d8458-b69f-4dd7-90a8-80d346fe835d" x="294" y="0" width="87" height="22"/>
				<box rightPadding="3">
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Right">
					<font fontName="Angsana New" size="16"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{sum_all}]]></textFieldExpression>
			</textField>
		</band>
	</summary>
</jasperReport>
